# 影院管理系统(TMS)用例文档

## 1.文档修改历史
| 修改人员 | 日期      | 修改原因               | 版本号 |
| :------: | --------- | ---------------------- | ------ |
|   全体人员   | 2019.3.18 | 草稿                   | 1.0    |
| 全体人员 | 2019.3.20 | 初版 | 1.1 |
| 安皓 | 2019.5.12 | 增添功能用例 | 1.1.1 |
| 范也 | 2019.6.19 | 增加第三阶段的功能用例 | 1.2.0 |
| 安皓 | 2019.6.20 | 更改第三阶段的功能用例 | 1.2.0 |

## 2.目录


<!-- TOC -->

- [影院管理系统(TMS)软件用例文档](#影院管理系统tms软件体系结构文档)
    - [1. 文档修改历史](#1-文档修改历史)
    - [2. 目录](#2-目录)
    - [3. 引言](#3-引言)
        - [3.1 目的](#31-目的)
        - [3.2 阅读说明](#32-阅读说明)
        - [3.3 参考文献](#33-参考文献)
    - [4. 用例图](#4-用例图)
    - [5. 用例列表](#5-用例列表)
    - [6. 详细用例描述](#6-详细用例描述)
        - [6.1 上架电影](#61-上架电影)
        - [6.2 统计预售电影的想看人数](#62-统计预售电影的想看人数)
        - [6.3 查看电影详情](#63-查看电影详情)
        - [6.4 标记某电影为想看](#64-标记某电影为想看)
        - [6.5 搜索电影](#65-搜索电影)
        - [6.6 发布会员卡](#66-发布会员卡)
        - [6.7 修改会员卡优惠策略](#67-修改会员卡优惠策略)
        - [6.8 新增退票策略](#68-新增退票策略)
        - [6.9 修改退票策略](#69-修改退票策略)
        - [6.10 影厅信息录入](#610-影厅信息录入)
        - [6.11 修改影厅信息](#611-修改影厅信息)
        - [6.12 影院角色的增删改查](#612-影院角色的增删改查)
        - [6.13 用户退票](#616-用户退票)
        - [6.14 查看历史充值](#614-查看历史充值)
        - [6.15 查看历史消费记录](#615-查看历史消费记录)
        - [6.16 赠送优惠券](#616-赠送优惠券)

<!-- /TOC -->

## 3.引言：

### 3.1 目的
影院管理系统面向的对象是观众和影院管理者，目的通过自动化购票，查询、更改影片信息，方便用户的购票流程，降低影院的营业成本。同时通过对用户行为的分析，提供更加人性化的体验。

### 3.2 阅读说明
影院管理系统实现了影院自动化管理和购票自动化，具体功能包括：

观众：查看当前已上架电影及电影详情，查看上架电影的排片信息，标记某电影为想看，搜索电影，购买电影票，购买和充值会员卡，查询会员卡余额，退票，查看历史充值/消费记录

影院管理员：上架电影，统计电影的想看人数，查看当前已上架电影及电影详情，排片，查看上架电影的排片信息，查看电影统计数据，发布优惠活动，修改退票策略，更改影院角色信息，管理影厅信息。

用例文档通过画用例图，并对每个用例进行详细描述，协助开发者理解客户需求。对每个用例的描述尽量做到详细准确，但不涉及系统内部功能，仅仅涉及与用户的交互。

通过UML建立模型，帮助开发者体会系统需求和基本架构。同时有助于与客户解释和交流需求。这些模型力求简洁，每一个步骤和对象都是必须的，方便以后的扩展和接口的设置。

### 3.3 参考文献
1. 《软件工程与计算(卷二)——软件开发的技术基础》
2. 《需求0418》

## 4.用例图：
[![用例图.png](https://i.loli.net/2019/05/12/5cd807d75ac24.png)](https://i.loli.net/2019/05/12/5cd807d75ac24.png)

## 5.用例列表：
* 上架电影
* 统计预售电影的想看人数
* 标记某电影为想看
* 搜索电影（日期，名称等）
* 发布会员卡
* 修改会员卡优惠策略
* 新增退票策略
* 修改退票策略
* 影厅信息录入
* 修改影厅信息
* 影院角色的增删改查
* 用户退票
* 查看历史充值
* 查看历史消费记录
* 赠送优惠券

## 6.详细用例描述

### 6.1 上架电影
- 用例编号：UC1

- 名称：上架电影

- 创建者：周钰坤

- 创建日期：2019.3.17

- 最后一次更新者：安皓

- 更新日期：2019.6.20

- 参与者：影院员工、管理员

- 触发条件：影院员工、管理员上传电影信息

- 前置条件：影院员工、管理员登录

- 后置条件：电影列表显示上架电影

- 优先级：高

- 正常流程：
> 1. 用户选择上架
> 2. 用户录入上架电影的详情  
> 3. 用户确认上架  
> 4. 上架电影加入上架电影列表  
> 5. 用户重复1-4步骤，直到上架完所有待上架电影  

 - 扩展流程：  

> 2a. 用户可以选择修改已经填写的电影信息
>  1. 系统展示修改后信息
> 2b. 用户可以选择取消上架
>  1. 系统取消该流程
> 3a. 如果商家填写的电影信息，对于电影信息的描述，详见《影院管理系统(TMS)需求规格说明文档》不全则显示提示框，提示电影信息不全

- 特殊需求：
>1. 无


###  6.2 统计预售电影的想看人数
- 用例编号：UC2

- 名称：统计预售电影的想看人数

- 创建者：周钰坤

- 创建日期：2019.3.17

- 最后一次更新者：安皓

- 更新日期：2019.6.20

- 参与者：影院员工、管理员
  
- 触发条件：影院员工、管理员选择查看电影统计

- 前置条件：电影已上架

- 后置条件：无

- 优先级：中

- 正常流程：
> 1. 影院员工选择查看电影统计
> 2. 系统展示电影想看人数的人数统计

- 扩展流程：
> 无

- 特殊需求：
> 无


### 6.3 查看电影详情
- 用例编号： UC3

- 名称：查看电影详情                                          
- 创建者：罗民胜

- 创建日期：2019.3.17

- 最后一次更新者：安皓

- 更新日期：2019.6.20

- 参与者 ： 观众

- 触发条件：观众选择查看电影详情

- 前置条件：电影信息已被录入

- 后置条件：无

-  优先级：高

- 正常流程：
> 1. 在电影列表中，用户选择查看某一电影的详情
> 2. 系统展示电影详情
> 3. 用户返回电影列表 
> 4. 用户重复1-3步，直到退出系统

- 扩展流程：
> 无

- 特殊需求：
> 无

###  6.4 标记某电影为想看
- 用例编号： UC4

- 名称：标记某电影为想看                                          

- 创建者：安皓

- 创建日期：2019.3.17

- 最后一次更新者：安皓

- 更新日期：2019.6.20

- 参与者 ：观众，目标是标记某电影为想看

- 触发条件：观众在电影详情展示界面标记电影为想看

- 前置条件：观众登录

- 后置条件：更新电影的想看人数和用户的想看状态

- 优先级：中

- 正常流程：  
> 1.用户标记正在查看的电影为想看  
> 2.电影简介界面显示用户已标记成功的信息  
> 3.用户标记为想看的电影被记录到用户想看电影的列表  
> 4.用户切换当前的电影简介页面到下一部电影的简介页面,用户重复1-4步，直到标记完所有自己想看的电影  
> 5.用户结束电影查看


- 扩展流程：
> 1a. 用户取消电影想看
>  2. 电影见面显示用户未标记成功
>  3. 用户标记为想看的电影被剔除出想看电影列表

- 特殊需求：
> 1. 用户可以查看自己的想看电影




###  6.5 搜索电影
- 用例编号： UC5

- 名称：搜索电影                                          

- 创建者：范也

- 创建日期：2019.3.17

- 最后一次更新者：范也

- 更新日期：2019.6.20

- 参与者 ： 观众

- 触发条件：用户在电影列表界面选择搜索

- 前置条件：用户登录

- 后置条件：无

- 优先级：高

- 正常流程：
> 1. 用户在搜索框中输入关键字  
> 2. 用户点击搜索
> 3. 系统显搜索结果列表,用户重复1-3步，直到结束搜索  

- 扩展流程： 
> 3a. 没有符合用户输入的电影  
>
> 1. 在搜索结果列表不显示任何电影


- 特殊需求：
> 1. 可以根据电影类型和电影是否上映进行筛选


###  6.6 发布会员卡优惠策略
- 用例编号： UC6

- 名称：发布会员卡

- 创建者：范也

- 创建日期：2019.6.2

- 最后一次更新者：安皓

- 更新日期：2019.6.20

- 参与者 ：影院管理员 员工

- 触发条件：点击发布会员卡

- 前置条件：管理员、员工已经登录

- 后置条件：记录新的会员卡策略

- 优先级：中

- 正常流程：
 > 1. 点击发布优惠策略
 > 2. 输入优惠策略的名称，描述，优惠金额，需满金额
 > 3. 用户重复第二步
 > 4. 点击确定

- 扩展流程：

 > 4a.点击取消 
 > 1.退出

- 特殊需求：

 > 无

###  6.7 修改会员卡优惠策略
- 用例编号： UC7
- 名称：修改会员卡优惠策略
- 创建者：范也
- 创建日期：2019.6.5
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：影院管理员 员工
- 触发条件：在会员卡策略上点击修改
- 前置条件：影院管理员(或员工)登录
- 后置条件：更新优惠策略并保存
- 优先级：低
- 正常流程：
> 1. 选中要修改的策略并选择修改
> 2. 输入更新的会员卡优惠策略信息：名称，描述，时间区间，优惠金额，需满金额
> 3. 点击确定
- 扩展流程：
  
> 3a. 点击取消
>
> 1. 退出修改
- 特殊需求：
> 1. 优惠金额需要小于需满金额


###  6.8 新增退票策略 
- 用例编号： UC8
- 名称：新增退票策略 
- 创建者：范也
- 创建日期：2019.6.5
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：管理员、影院员工
- 触发条件：用户选择新增退票策略
- 前置条件：管理员（或影院员工）已登录
- 后置条件：更新退票策略并保存
- 优先级：高
- 正常流程：

> 1. 点击新增退票策略

> 2. 输入时间区间和退款金额	

> 3. 点击提交
- 扩展流程：
  
> 3a. 点击取消
>
> 1. 退出修改

- 特殊需求：
  
> 无

###  6.9 修改退票策略 

- 用例编号： UC9
- 名称：修改退票策略 
- 创建者：范也
- 创建日期：2019.6.7
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：影院员工、管理员
- 触发条件：点击修改退票策略
- 前置条件：管理员（或影院员工）已登录
- 后置条件：更新退票策略并保存
- 优先级：中
- 正常流程：
> 1.在已经显示的退票策略上输入新的信息
> 2.点击提交

- 扩展流程：

> 3a. 点击取消
> 1. 退出修改

- 特殊需求：
> 无

### 6.10 影厅信息录入

- 用例编号： UC10
- 名称：影厅信息录入
- 创建者：范也
- 创建日期：2019.6.7
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：管理员、影院员工
- 触发条件：点击新增影厅
- 前置条件：管理员（或影院员工）已登录
- 后置条件：增加影厅信息并保存
- 优先级：高
- 正常流程：
> 1. 点击新增按钮
> 2. 输入影厅行列和名称
> 3. 点击确定

- 扩展流程：
> 3a. 点击取消
>
> 1. 退出更改

- 特殊需求：
> - 影厅显示座位排列 


###  6.11 修改影厅信息

- 用例编号： UC11
- 名称：修改影厅信息
- 创建者：范也
- 创建日期：2019.6.2
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：管理员、影院员工
- 触发条件：点击修改
- 前置条件：管理员（或影院员工）已登录
- 后置条件：更新影厅信息并保存
- 优先级：中
- 正常流程：
> 1. 在对应的影厅处点击修改
> 2. 输入新的影厅信息：名称，大小
> 3. 点击确定

- 扩展流程：
> 3a. 点击取消
> 1. 退出

- 特殊需求：
> 无

###  6.12 影院角色的增删改查

- 用例编号： UC12
- 名称：影院角色的增删改查
- 创建者：范也
- 创建日期：2019.6.1
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：管理员
- 触发条件：点击搜索或者删除
- 前置条件：影院员工（管理员）登录
- 后置条件：更新影厅角色信息并保存
- 优先级：中
- 正常流程：
> 1. 输入关键字
> 2. 点击搜索
> 3. 显示用户列表
> 4. 更改影院角色信息
> 5. 点击提交

- 扩展流程：
> 4a.选择用户类型
> 1. 提交

- 特殊需求：
> 无
###  6.13 用户退票

- 用例编号： UC13
- 名称：用户退票
- 创建者：范也
- 创建日期：2019.6.2
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：观众
- 触发条件：点击退票按钮
- 前置条件：用户登录，进入查看电影票
- 后置条件：更新用户票状态，退款给用户，显示退票成功
- 优先级：中
- 正常流程：
> 1.点击退票
> 2.确认是否退票
> 3.确认退票
> 4.显示退票成功，退还到用户会员卡，如果用户没有会员卡，为其生成普通卡并将钱退还到普通卡

- 扩展流程：
> 3a.取消
> 1.退出

- 特殊需求：
> 无

###  6.14 查看历史充值 

- 用例编号： UC14
- 名称：查看历史充值
- 创建者：范也
- 创建日期：2019.6.7
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：观众
- 触发条件：观众查看历史记录
- 前置条件：用户登录
- 后置条件：无
- 优先级：低
- 正常流程：
> 1. 进入历史记录界面
> 2. 显示所有历史充值记录
> 3. 点击单项记录
> 4. 显示详情，包括充值后的会员卡余额
> 5. 重复2-4步

- 扩展流程：
 > 无

- 特殊需求：
 > 无

###  6.15 查看历史消费记录

- 用例编号： UC15
- 名称：查看历史消费记录
- 创建者：范也
- 创建日期：2019.3.19
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：观众
- 触发条件：观众查看历史记录
- 前置条件：观众登录
- 后置条件：无
- 优先级：低
- 正常流程：
> 1. 进入历史记录界面
> 2. 显示历史消费记录
> 3. 点击单项记录
> 4. 显示详情
> 5. 重复2-4步

- 扩展流程：.
 > 无

- 特殊需求：
 > 无

###  6.16 赠送优惠券

- 用例编号： UC16
- 名称：赠送优惠券
- 创建者：范也
- 创建日期：2019.3.19
- 最后一次更新者：安皓
- 更新日期：2019.6.20
- 参与者 ：管理员、员工
- 触发条件：点击赠送
- 前置条件：影院员工（或管理员）登录，选择用户，并选择优惠券
- 后置条件：更新用户数据
- 优先级：低
- 正常流程：
> 1. 在优惠券列表点击赠送
> 2. 通过关键字和用户类型，和消费金额，搜索用户
> 3. 选择用户
> 4. 点击确认赠送

- 扩展流程：
> 4a. 点击取消
> 1. 退出
> 3a. 继续选择
> 1. 选择用户，用户列表增加

- 特殊需求：
> 无


## 7.需求分析模型
### 7.1顺序图
#### 7.1.1 上架电影
[![上架电影顺序图.png](https://i.loli.net/2019/03/20/5c9227a22e285.png)](https://i.loli.net/2019/03/20/5c9227a22e285.png)

#### 7.1.2 统计预售电影的想看人数
[![统计电影的想看人数顺序图.png](https://i.loli.net/2019/03/20/5c9227a1f196e.png)](https://i.loli.net/2019/03/20/5c9227a1f196e.png)

#### 7.1.3 查看电影详情
[![查看电影详情顺序图.png](https://i.loli.net/2019/03/20/5c923219989fb.png)](https://i.loli.net/2019/03/20/5c923219989fb.png)

#### 7.1.4 标记某电影为想看
[![标记喜爱顺序图.png](https://i.loli.net/2019/03/20/5c9225966527d.png)](https://i.loli.net/2019/03/20/5c9225966527d.png)

#### 7.1.5 搜索电影
[![搜索顺序图 .png](https://i.loli.net/2019/03/20/5c922596442c8.png)](https://i.loli.net/2019/03/20/5c922596442c8.png)

#### 7.1.6 新增影厅
[![新增影厅.png](https://i.loli.net/2019/06/20/5d0ba44928c8d53170.png)](https://i.loli.net/2019/06/20/5d0ba44928c8d53170.png)

#### 7.1.7 修改排片
[![修改排片.png](https://i.loli.net/2019/06/20/5d0ba44961b9984693.png)](https://i.loli.net/2019/06/20/5d0ba44961b9984693.png)

#### 7.1.8 退票
[![退票 (1).png](https://i.loli.net/2019/06/20/5d0ba449efa1454318.png)](https://i.loli.net/2019/06/20/5d0ba449efa1454318.png)


### 7.2 状态图
#### 7.2.1 上架电影
[![上架电影状态图.png](https://i.loli.net/2019/03/20/5c9227a24829c.png)](https://i.loli.net/2019/03/20/5c9227a24829c.png)

#### 7.2.2 统计预售电影的想看人数
[![统计电影的想看人数状态图.png](https://i.loli.net/2019/03/20/5c9227a241fa8.png)](https://i.loli.net/2019/03/20/5c9227a241fa8.png)

#### 7.2.3 查看电影详情
[![查看电影详情状态图.png](https://i.loli.net/2019/03/20/5c92321a2a9a7.png)](https://i.loli.net/2019/03/20/5c92321a2a9a7.png)

#### 7.2.4 标记某电影为想看
[![标记喜欢状态图.png](https://i.loli.net/2019/03/20/5c9225966bee6.png)](https://i.loli.net/2019/03/20/5c9225966bee6.png)

#### 7.2.5 搜索电影
[![搜索状态图.png](https://i.loli.net/2019/03/20/5c92259621260.png)](https://i.loli.net/2019/03/20/5c92259621260.png)

#### 7.2.6 发布会员卡
[![赠送优惠券.png](https://i.loli.net/2019/06/20/5d0ba449760b554099.png)](https://i.loli.net/2019/06/20/5d0ba449760b554099.png)

#### 7.2.7 新增影厅
[![新增影厅.png](https://i.loli.net/2019/06/20/5d0ba44a4686316138.png)](https://i.loli.net/2019/06/20/5d0ba44a4686316138.png)


#### 7.2.8 退票
[![退票.png](https://i.loli.net/2019/06/20/5d0ba449bbe5f31080.png)](https://i.loli.net/2019/06/20/5d0ba449bbe5f31080.png)

### 7.3 概念类图
[![概念类图.png](https://i.loli.net/2019/03/20/5c922dc7e3b0b.png)](https://i.loli.net/2019/03/20/5c922dc7e3b0b.png)